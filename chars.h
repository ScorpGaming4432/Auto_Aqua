/**
 * ============================================================================
 * CHARS.H - Master Glyph Library and Splash Animation
 * ============================================================================
 */

#ifndef CUSTOM_CHARS_H
#define CUSTOM_CHARS_H

#pragma once
#include <Arduino.h>
#include <avr/pgmspace.h>
#include "display.h"

namespace Glyphs {

// Master Bitmask Library
const uint8_t MASTER_LIBRARY[][8] PROGMEM = {
  { 0, 0, 14, 1, 15, 17, 15, 2 },   // ą (0) \200
  { 2, 4, 14, 16, 16, 17, 14, 0 },  // ć (1) \201
  { 0, 0, 14, 17, 31, 16, 14, 2 },  // ę (2) \202
  { 0, 0, 14, 17, 31, 17, 17, 0 },  // ł (3) \203
  { 2, 4, 14, 17, 31, 16, 14, 0 },  // ó (4) \204
  { 2, 4, 14, 16, 14, 1, 30, 0 },   // ś (5) \205
  { 2, 4, 31, 2, 4, 8, 31, 0 },     // ź (6) \206

  { 31, 16, 16, 16, 16, 16, 16, 0 },  // Г (7)  \207
  { 15, 9, 9, 9, 9, 31, 17, 0 },      // Д (8)  \210
  { 17, 17, 21, 14, 21, 17, 17, 0 },  // Ж (9) \211
  { 14, 17, 1, 6, 1, 17, 14, 0 },     // З (10) \212
  { 17, 17, 19, 21, 25, 17, 17, 0 },  // И (11) \213
  { 10, 4, 17, 19, 21, 25, 17, 0 },   // Й (12) \214
  { 7, 9, 9, 9, 9, 9, 17, 0 },        // Л (13) \215
  { 31, 17, 17, 17, 17, 17, 17, 0 },  // П (14) \216
  { 15, 17, 17, 15, 5, 9, 17, 0 }     // Я (15) \217
  { 0, 0, 0, 0, 0, 0, 0 }             // ы (16) \220
  { 0, 0, 0, 0, 0, 0, 0 }             // ъ (17) \221
  { 0, 0, 0, 0, 0, 0, 0 }             // ё (18) \222
  { 0, 0, 0, 0, 0, 0, 0 }             // Ч (19) \223
  { 0, 0, 0, 0, 0, 0, 0 }             // ь (20) \224

  { 0, 0, 0, 0, 0, 0, 0 }             // ü (21) \225
  { 0, 0, 0, 0, 0, 0, 0 }             // ä (22) \226

  { 0, 0, 0, 0, 0, 0, 0 }             // ç (23) \227
  { 0, 0, 0, 0, 0, 0, 0 }             // é (24) \230
  { 0, 0, 0, 0, 0, 0, 0 }             // â (25) \231

  { 0, 0, 0, 0, 0, 0, 0 }             // ñ (26) \232
  { 0, 0, 0, 0, 0, 0, 0 }             // í (27) \233
  { 0, 0, 0, 0, 0, 0, 0 }             // á (28) \234

  { 0, 0, 0, 0, 0, 0, 0 }             // à (29) \235

  { 0, 0, 0, 0, 0, 0, 0 }             // ê (30) \236
  { 0, 0, 0, 0, 0, 0, 0 }             // ã (31) \237

  { 0, 0, 0, 0, 0, 0, 0 }             // ı (32) \240
  { 0, 0, 0, 0, 0, 0, 0 }             // ş (33) \241
  { 0, 0, 0, 0, 0, 0, 0 }             // ğ (34) \242
  { 0, 0, 0, 0, 0, 0, 0 }             // ö (35) \243
  { 0, 0, 0, 0, 0, 0, 0 }             // İ (36) \244

  { 0, 0, 0, 0, 0, 0, 0 }             // Č (37) \245 (smallbig)
  { 0, 0, 0, 0, 0, 0, 0 }             // š (38) \246
  { 0, 0, 0, 0, 0, 0, 0 }             // ž (39) \247
  { 0, 0, 0, 0, 0, 0, 0 }             // ý (40) \250
  { 0, 0, 0, 0, 0, 0, 0 }             // ú (41) \251
  { 0, 0, 0, 0, 0, 0, 0 }             // ě (41) \252

};

const uint8_t DROP_CHARS[4][8] PROGMEM = {
  { 4, 4, 14, 14, 14, 31, 31, 31 }, { 1, 2, 2, 2, 2, 3, 1, 0 }, { 31, 31, 31, 31, 31, 15, 3, 31 }, { 16, 24, 24, 24, 24, 24, 16, 0 }
};

inline void animateIcon(uint8_t slots[4], uint8_t revealRows, uint8_t scratchBuf[]) {
  for (uint8_t i = 0; i < 4; i++) {
    for (uint8_t row = 0; row < 8; row++) {
      uint8_t pix = pgm_read_byte(&DROP_CHARS[i][row]);
      if (row < 8 - revealRows) pix = 0;
      scratchBuf[row] = pix;
    }
    lcd.createChar(slots[i], scratchBuf);
  }
}

}  // namespace Glyphs

#endif
